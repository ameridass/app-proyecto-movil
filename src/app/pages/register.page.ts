import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';
import { AlertServiceService } from '../services/alert-service.service';
import { LoginRegisterService } from '../services/login-register.service';

@Component({
  selector: 'app-register',
  templateUrl: './register.page.html',
  styleUrls: ['./register.page.scss'],
})


export class RegisterPage implements OnInit {

  myFormGroupControls: FormGroup;

  constructor
  (
    private loginRegister: LoginRegisterService,
    private myFormBuilder: FormBuilder,
    private alertService: AlertServiceService
    // private geoLocation: Geolocation
  ) {

   }

   profilePicture = '1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000011111111111111111111111111000000000000000011111111111111111111110000011111111110000011111111111111111110000111111111111110000111111111111111110001111111111111111110001111111111111110001111111111111111111100011111111111110001111111100000011111111000111111111110001111111000000000011111110001111111111001111111000000000000111111100111111111000111111100000000000001111110001111111100111111100000000000000111111100111111100011111110000000000000011111110001111110011111111000000000000001111111100111111001111111100000000000000111111110011111100111111110000000000000011111111001111110011111111000000000000001111111100111111001111111110000000000001111111110011111100111111111100000000000111111111001111110011111111110000000000111111111100111111001111111110000000000001111111110011111100111111100000000000000001111111001111110011111100000000000000000001111100111111000111100000000000000000000011100011111110011100000000000000000000000110011111111000100000000000000000000000010001111111110000000000000000000000000000001111111111000000000000000000000000000000111111111110000000000000000000000000000111111111111100000000000000000000000000111111111111111000000000000000000000000111111111111111110000000000000000000000111111111111111111100000000000000000000111111111111111111111100000000000000001111111111111111111111111100000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111';

  ngOnInit() {
    this.myFormGroupControls = this.myFormBuilder.group({
      nombres: ['',Validators.required],
      apellidos: ['',Validators.required],
      alias: ['',Validators.required],
      email: ['',Validators.required],
      password:['', Validators.required]
    })

  }

  createNewUser(){
    let dataRequest = {
      nombres: this.myFormGroupControls.controls['nombres'].value,
      apellidos: this.myFormGroupControls.controls['apellidos'].value,
      alias: this.myFormGroupControls.controls['alias'].value,
      foto_perfil: this.profilePicture,
      email: this.myFormGroupControls.controls['email'].value,
      password: this.myFormGroupControls.controls['password'].value

    };



    this.loginRegister.createUser(dataRequest).subscribe((data) =>{
      if(data.response === true){
        console.log('Request completed: ',data.message);
        this.alertService.showConfirm('Esta hecho!', 'Sera redireccionado a iniciar sesion.','/login');
      }else{
        console.log('Fallo request');
      }
    })
  }

}
